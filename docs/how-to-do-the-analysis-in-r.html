<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>How to do the analysis in R | Analysis of Data on the Existing Coastal and Marine Protected Areas</title>
  <meta name="description" content="Guide to help in analyzing data of coastal and marine protected areas" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="How to do the analysis in R | Analysis of Data on the Existing Coastal and Marine Protected Areas" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Guide to help in analyzing data of coastal and marine protected areas" />
  <meta name="github-repo" content="jbaafi/BIOL4650-marine_conservation" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="How to do the analysis in R | Analysis of Data on the Existing Coastal and Marine Protected Areas" />
  
  <meta name="twitter:description" content="Guide to help in analyzing data of coastal and marine protected areas" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="getting-started-and-learning-r-1.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Getting started and Learning R</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#to-hand-in"><i class="fa fa-check"></i>To hand-in</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r.html"><a href="how-to-do-the-analysis-in-r.html"><i class="fa fa-check"></i>How to do the analysis in R</a>
<ul>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r.html"><a href="how-to-do-the-analysis-in-r.html#data-importation-and-filtering"><i class="fa fa-check"></i>Data importation and filtering</a></li>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r.html"><a href="how-to-do-the-analysis-in-r.html#creating-a-new-object"><i class="fa fa-check"></i>Creating a new object</a></li>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r.html"><a href="how-to-do-the-analysis-in-r.html#preparing-the-data-for-graphing"><i class="fa fa-check"></i>Preparing the data for graphing</a></li>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r.html"><a href="how-to-do-the-analysis-in-r.html#making-graphs"><i class="fa fa-check"></i>Making graphs</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="getting-started-and-learning-r-1.html"><a href="getting-started-and-learning-r-1.html"><i class="fa fa-check"></i>Getting started and Learning R</a></li>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r-1.html"><a href="how-to-do-the-analysis-in-r-1.html"><i class="fa fa-check"></i>How to do the analysis in R</a>
<ul>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r-1.html"><a href="how-to-do-the-analysis-in-r-1.html#data-importation-and-filtering-1"><i class="fa fa-check"></i>Data importation and filtering</a></li>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r-1.html"><a href="how-to-do-the-analysis-in-r-1.html#creating-a-new-object-1"><i class="fa fa-check"></i>Creating a new object</a></li>
<li class="chapter" data-level="" data-path="how-to-do-the-analysis-in-r-1.html"><a href="how-to-do-the-analysis-in-r-1.html#graphing-the-data"><i class="fa fa-check"></i>Graphing the data</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analysis of Data on the Existing Coastal and Marine Protected Areas</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="how-to-do-the-analysis-in-r" class="section level1 unnumbered">
<h1>How to do the analysis in R</h1>
<div id="data-importation-and-filtering" class="section level2 unnumbered">
<h2>Data importation and filtering</h2>
<p>Letâ€™s explore the <em>protected areas</em> data from the World Database on Protected Areas.</p>
<ol style="list-style-type: decimal">
<li>It is best to make a folder on your computer Desktop where you will work on this assignment (if needed, review <a href="https://ahurford.github.io/quant-guide-all-courses/style.html">Best Practices</a>).</li>
</ol>
<p><img src="figures/folder.png" width="40%" /></p>
<ol start="2" style="list-style-type: decimal">
<li><p>Download the <code>.csv</code> file spreadsheet for protected areas in the country you are studying from the <em>World Database on Protected Areas</em> to the folder you made. You may rename the <code>.csv</code> file you downloaded eg. <code>protected_areas.csv</code></p></li>
<li><p><a href="https://ahurford.github.io/quant-guide-all-courses/rstudio.html#source-pane%5D">Open and save a new R Script</a> in your folder. One of the first commands of your R Script will be to <a href="https://ahurford.github.io/quant-guide-all-courses/data-entry.html#loading-or-importing-data">load your data</a>. For example:</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="how-to-do-the-analysis-in-r.html#cb1-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">&quot;protected_areas.csv&quot;</span>)</span></code></pre></div>
<p>When writing your R script you need to learn about using your <code>Console</code> versus writing your R Script in the Source pane. Please read the section <a href="https://ahurford.github.io/quant-guide-all-courses/rstudio.html">Finding your way around R Studio</a> if this is unfamiliar.</p>
<p>When you find a command that is essential to your analysis, you should put it in your R Script. Note that the order of the commands is important: the will run top to bottom. If you just want to test out a command, then use your <code>Console</code>. After you find a command that works (by testing in the <code>Console</code>), you might want to add it to your R Script. To run all the commands in your R Script (line by line) you use the <code>Source</code> button (or find Source from the Code menu), or you highlight the lines to run and use the <code>Run</code> button.</p>
<ol start="4" style="list-style-type: decimal">
<li>In the <a href="https://ahurford.github.io/quant-guide-all-courses/rstudio.html#console-pane">Console</a>, inspect your data to check that it has loaded. For example:</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="how-to-do-the-analysis-in-r.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data1)</span></code></pre></div>
<p>We put this command in the <code>Console</code> because it is just to check that the data loaded correctly. It isnâ€™t necesssary to have this command in our R Script, however, the <code>read.csv()</code> command from above is essential, so you definitely want that one amongst the first few lines of your R Script. After you add a few lines to your R Script, you will want to periodically run your whole R script to make sure it is working as you expect.</p>
<p>If your data has not loaded, the most likely problem is a spelling error or problems with specifying the <a href="https://ahurford.github.io/quant-guide-all-courses/rintro.html#working-directory">path</a> to <code>protected_areas.csv</code>. You might try:</p>
<ul>
<li><p>the <a href="https://ahurford.github.io/quant-guide-all-courses/data-entry.html#the-rstudio-way-the-import-feature">RStudio way</a> of importing your data, or</p></li>
<li><p>moving <code>protected_areas.csv</code> to your <a href="https://ahurford.github.io/quant-guide-all-courses/rintro.html#working-directory">working directory</a>. The working directory is the folder you created to contain your data and files.</p></li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>After loading the data, read through the metadata file that is downloaded as a pdf file along with the <code>.csv</code> file to better understand the data.</li>
</ol>
<blockquote>
<p><strong>Data and metadata can be found here</strong></p>
</blockquote>
<blockquote>
<p><a href="https://www.protectedplanet.net/en/search-areas?geo_type=site" class="uri">https://www.protectedplanet.net/en/search-areas?geo_type=site</a></p>
</blockquote>
<ol start="6" style="list-style-type: decimal">
<li>You will want to do some exploration of your data. See <a href="https://ahurford.github.io/quant-guide-all-courses/handling-data.html">Handling the data</a> for how to recover the names of the columns for all the data.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="how-to-do-the-analysis-in-r.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data1)</span></code></pre></div>
<pre><code>##  [1] &quot;TYPE&quot;        &quot;WDPAID&quot;      &quot;WDPA_PID&quot;    &quot;PA_DEF&quot;      &quot;NAME&quot;       
##  [6] &quot;ORIG_NAME&quot;   &quot;DESIG&quot;       &quot;DESIG_ENG&quot;   &quot;DESIG_TYPE&quot;  &quot;IUCN_CAT&quot;   
## [11] &quot;INT_CRIT&quot;    &quot;MARINE&quot;      &quot;REP_M_AREA&quot;  &quot;GIS_M_AREA&quot;  &quot;REP_AREA&quot;   
## [16] &quot;GIS_AREA&quot;    &quot;NO_TAKE&quot;     &quot;NO_TK_AREA&quot;  &quot;STATUS&quot;      &quot;STATUS_YR&quot;  
## [21] &quot;GOV_TYPE&quot;    &quot;OWN_TYPE&quot;    &quot;MANG_AUTH&quot;   &quot;MANG_PLAN&quot;   &quot;VERIF&quot;      
## [26] &quot;METADATAID&quot;  &quot;SUB_LOC&quot;     &quot;PARENT_ISO3&quot; &quot;ISO3&quot;        &quot;SUPP_INFO&quot;  
## [31] &quot;CONS_OBJ&quot;</code></pre>
<p>Note that <code>names(data1)</code> is a good command to run in the <code>Console</code> because we want to know the column names so that we can extract the correct column later: <code>names(data1)</code> would be run in the <code>Console</code> because it is a query rather than an essential part of the analysis.</p>
<ol start="7" style="list-style-type: decimal">
<li>You could also use the <code>summary()</code> function to run a quick statistical summary of the data frame, calculating mean, median and quartile values for continuous variables. Try this in the <code>Console</code>:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="how-to-do-the-analysis-in-r.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data1)</span></code></pre></div>
<p>Again, <code>summary(data1)</code> is a query - to check that our data looks okay, so we opt to run it in the <code>Console</code> rather than adding it to our R Script.</p>
<ol start="8" style="list-style-type: decimal">
<li>To extract a column of the data, see <a href="https://ahurford.github.io/quant-guide-all-courses/handling-data.html">Handling the data</a>. You may use either Approach 1: <code>dplyr</code> or Approach 2: base R. Generally, the <code>dplyr</code> commands tend to be simpler, however, it is good to also know the base R commands. You need only choose 1 approach. We recommend Approach 1: <code>dplyr</code>, unless you have prior experience with base R and prefer to do the analysis that way.</li>
</ol>
<p><strong>Approach 1: dplyr</strong></p>
<p>If you have not installed the <code>dplyr</code> package you will need to install it. Please read <a href="https://ahurford.github.io/quant-guide-all-courses/rintro.html#r-packages">install</a>.</p>
<p>Once it is installed, to use the <a href="https://ahurford.github.io/quant-guide-all-courses/handling-data.html#dplyr"><code>dplyr</code> functions</a> you need to load the package:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="how-to-do-the-analysis-in-r.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>This command is essential, and generally we would put it as one of the first commands in our R Script.</p>
<p>Now we select the <code>MARINE</code> column, with the command:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="how-to-do-the-analysis-in-r.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(data1, MARINE)</span></code></pre></div>
<p>The output of <code>select(data1, MARINE)</code> is a data frame because the variable has an associated name.</p>
<p><strong>Approach 2: Base R</strong></p>
<p>To view the <code>MARINE</code>, column of the data in the <code>Console</code>, try:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="how-to-do-the-analysis-in-r.html#cb8-1" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>MARINE</span></code></pre></div>
<p>Be sure to type exactly <code>MARINE</code> after the <code>$</code>.</p>
<p>You need to write the column name exactly as it appears in the output of <code>names(data1)</code> or RStudio will produce an error. Remember <code>MARINE</code> is capitalized in the data frame so be careful not to type <code>Marine</code> which will come out as an error.</p>
</div>
<div id="creating-a-new-object" class="section level2 unnumbered">
<h2>Creating a new object</h2>
<p>This section is focused on subsetting the data that was named <code>data1</code> and creating a new object to hold the processed data. We will call this <code>data2</code>.</p>
<ol style="list-style-type: decimal">
<li>We want to filter the data to separate protected areas identified as exclusively terrestrial from those that include marine areas. The new data created will be saved as <code>data2</code>. Letâ€™s run this code in the <code>Console</code>:</li>
</ol>
<p><strong>Approach 1: dplyr</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="how-to-do-the-analysis-in-r.html#cb9-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data1, MARINE <span class="sc">!=</span> <span class="dv">0</span>)</span></code></pre></div>
<p><strong>Approach 2: base R</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="how-to-do-the-analysis-in-r.html#cb10-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data1[data1<span class="sc">$</span>MARINE<span class="sc">!=</span><span class="dv">0</span>,]</span></code></pre></div>
<p>Note, the comma inside the square brackets indicates to take all columns for the rows where <code>MARINE!=0</code> is <code>TRUE</code>.</p>
<p><strong>Both approaches</strong></p>
<p>In the <code>MARINE</code> column <code>0</code> indicates that a site is not marine. The new variable <code>data2</code> now contains all the rows for the marine sites because <code>!=0</code> means the value is not 0, and so therefore the site <em>is</em> marine (a double negative!).</p>
<p>Check your output:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="how-to-do-the-analysis-in-r.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data2)</span>
<span id="cb11-2"><a href="how-to-do-the-analysis-in-r.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data2<span class="sc">$</span>MARINE)</span></code></pre></div>
<p>In particular, look at the <code>MARINE</code> column. Are there any <code>0</code>s left in the <code>MARINE</code> column? No? Good, because we want the marine sites, so we do not want any <code>0</code>s in the <code>MARINE</code> column.</p>
<ol start="2" style="list-style-type: decimal">
<li>We want to compute the average size of coastal MPAs. Letâ€™s take a look at the value of <code>GIS_M_AREA</code> in row 18041:</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="how-to-do-the-analysis-in-r.html#cb12-1" aria-hidden="true" tabindex="-1"></a>data2<span class="sc">$</span>GIS_M_AREA[<span class="dv">18041</span>]</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Oh no! The value of the column <code>GIS_M_AREA</code> for this row of data is <code>NA</code>. This means that no value was recorded. This will ruin our calculation of the average so we need to remove these <code>NA</code> values from the <code>GIS_M_AREA</code> column.</p>
<p>Which rows are <code>NA</code>s? We can find out like this:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="how-to-do-the-analysis-in-r.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">which</span>(<span class="fu">is.na</span>(data2<span class="sc">$</span>GIS_M_AREA)<span class="sc">==</span><span class="st">&quot;TRUE&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 17545 17546 17547 17548 17549 17550</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="how-to-do-the-analysis-in-r.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">is.na</span>(data2<span class="sc">$</span>GIS_M_AREA)<span class="sc">==</span><span class="st">&quot;TRUE&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 497</code></pre>
<p>where <code>head()</code> is used to return only the first 6 rows with NA values so as to not return a lengthy output, and <code>length()</code> is used to tell us there are 497 <code>NA</code> values in the <code>GIS_M_AREA</code> column.</p>
<p><strong>Approach 1: dyplyr</strong>
Here is the command to remove the <code>NA</code>s as described in <a href="https://ahurford.github.io/quant-guide-all-courses/handling-data.html#dplyr">Handling the data</a>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="how-to-do-the-analysis-in-r.html#cb18-1" aria-hidden="true" tabindex="-1"></a>data3 <span class="ot">&lt;-</span> <span class="fu">filter</span>(data2, <span class="sc">!</span><span class="fu">is.na</span>(GIS_M_AREA))</span></code></pre></div>
<p>The above line of code is more than a query, it is an essential step in the analysis so you will want to add it to the code in your R script in the <code>Source</code> pane.</p>
<p><strong>Approach 2: base R</strong>
To remove the <code>NA</code>s</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="how-to-do-the-analysis-in-r.html#cb19-1" aria-hidden="true" tabindex="-1"></a>data3 <span class="ot">&lt;-</span> data2[<span class="sc">!</span><span class="fu">is.na</span>(data2<span class="sc">$</span>GIS_M_AREA),]</span></code></pre></div>
<p><strong>Both approaches</strong></p>
<p>Letâ€™s check that we effectively removed the <code>NA</code>s from the data.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="how-to-do-the-analysis-in-r.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">which</span>(<span class="fu">is.na</span>(data3<span class="sc">$</span>GIS_M_AREA)<span class="sc">==</span><span class="st">&quot;TRUE&quot;</span>))</span>
<span id="cb20-2"><a href="how-to-do-the-analysis-in-r.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">is.na</span>(data3<span class="sc">$</span>GIS_M_AREA)<span class="sc">==</span><span class="st">&quot;TRUE&quot;</span>))</span></code></pre></div>
<p>Now we see that <code>data3</code> is a cleaned up version of <code>data2</code> that no longer contains the the <code>NA</code> values in the <code>GIS_M_AREA</code> column because when we use <code>length()</code> to find out how many of the values in <code>data3$GIS_M_AREA</code> are <code>NA</code> and the returned value is 0.</p>
<p>The commands above are a query so you would run them in the <code>Console</code> to check that your analysis is going to plan, however, you do not need to include this in your R Script.</p>
<ol start="3" style="list-style-type: decimal">
<li>We can now calculate the average size of the coastal MPAs. Letâ€™s run this code:</li>
</ol>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="how-to-do-the-analysis-in-r.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(data3<span class="sc">$</span>GIS_M_AREA)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>The median size of the coastal MPAs can also be found by running a similar code as follows:</li>
</ol>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="how-to-do-the-analysis-in-r.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(data3<span class="sc">$</span>GIS_M_AREA)</span></code></pre></div>
</div>
<div id="preparing-the-data-for-graphing" class="section level2 unnumbered">
<h2>Preparing the data for graphing</h2>
<p>Before, we can make the graphs we will need to organize the data we want to graph.</p>
<ol style="list-style-type: decimal">
<li>First, we would like to graph the number of areas in each level of protection. To do this, we will have to group the data according to the level of protection and count the number of areas in each level of protection and saving it as <code>data4</code>.</li>
</ol>
<p><strong>Approach 1: dplyr</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="how-to-do-the-analysis-in-r.html#cb23-1" aria-hidden="true" tabindex="-1"></a>data4 <span class="ot">&lt;-</span> data3 <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="how-to-do-the-analysis-in-r.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(IUCN_CAT) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="how-to-do-the-analysis-in-r.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>()</span></code></pre></div>
<p><strong>Approch 2: base R</strong></p>
<p>Joseph add code here</p>
<p><strong>Both approaches</strong></p>
<p>Letâ€™s query the result in our <code>Console</code> to see that this worked:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="how-to-do-the-analysis-in-r.html#cb24-1" aria-hidden="true" tabindex="-1"></a>data4</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    IUCN_CAT           n
##    &lt;chr&gt;          &lt;int&gt;
##  1 Ia              1539
##  2 Ib               256
##  3 II               731
##  4 III              756
##  5 IV              4872
##  6 Not Applicable   191
##  7 Not Assigned    1113
##  8 Not Reported    5469
##  9 V               1638
## 10 VI               979</code></pre>
<p>Yikes! Rows 6, 7, and 8 are <code>Not Applicable</code>, <code>Not Assigned</code> and <code>Not Reported</code>. We need to remove these.</p>
<p>We delete the rows that have <code>NAs</code> by running this:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="how-to-do-the-analysis-in-r.html#cb26-1" aria-hidden="true" tabindex="-1"></a>data4 <span class="ot">&lt;-</span> data4[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>), ] </span></code></pre></div>
<p>Note that the minus sign indicates to remove.</p>
<p>Our data describing the number of areas in each level of protection is now ready as <code>data4</code>, but letâ€™s clean more data to make another graph before moving on to the graphing section.</p>
<ol start="2" style="list-style-type: decimal">
<li>Now we would like to calculate the amount of area that is strongly protected.</li>
</ol>
<p><strong>Approach 1: dplyr</strong>
We can do this by grouping by the <code>IUCN_CAT</code> column of the dataset and summing the <code>GIS_M_AREA</code> accordingly and naming the resulting data as <code>data5</code>. Letâ€™s run this code in the <code>Console</code>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="how-to-do-the-analysis-in-r.html#cb27-1" aria-hidden="true" tabindex="-1"></a>data5 <span class="ot">&lt;-</span> data3 <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="how-to-do-the-analysis-in-r.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(IUCN_CAT) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="how-to-do-the-analysis-in-r.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">AREA_SUM =</span> <span class="fu">sum</span>(GIS_M_AREA))</span></code></pre></div>
<p><strong>Approach 2: base R</strong>
[Joesph add here]</p>
<p><strong>Both approaches</strong></p>
<p>We can check the result by typing, in the Console:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="how-to-do-the-analysis-in-r.html#cb28-1" aria-hidden="true" tabindex="-1"></a>data5</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    IUCN_CAT       AREA_SUM
##    &lt;chr&gt;             &lt;dbl&gt;
##  1 Ia             2096610.
##  2 Ib              390707.
##  3 II             1038162.
##  4 III             121394.
##  5 IV             5188049.
##  6 Not Applicable 2761553.
##  7 Not Assigned   1506267.
##  8 Not Reported   9353197.
##  9 V              5830637.
## 10 VI             7708143.</code></pre>
<p>Note that this time, we would like to leave the categories: <code>Not applicable</code>, <code>Not assigned</code> and <code>Not reported</code> (<strong>Evan is this right???)</strong>. If <code>data5</code> looks good, you will want to add the commands that produced <code>data5</code> to your R script in the Source window.</p>
</div>
<div id="making-graphs" class="section level2 unnumbered">
<h2>Making graphs</h2>
<p>In this section we will made graphs of <code>data4</code> and <code>data5</code>. You can read more on <a href="https://ahurford.github.io/quant-guide-all-courses/graph.html">Making graphs in R</a>.</p>
<ol style="list-style-type: decimal">
<li>We would like to construct a histogram to graph the size-frequency distribution.</li>
</ol>
<p>We will construct a histogram without logarithm scale with the function <code>hist()</code>. The data we need to use are <code>data3$GIS_M_AREA</code> which contains the areas of the marine protected areas:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="how-to-do-the-analysis-in-r.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data3<span class="sc">$</span>GIS_M_AREA, <span class="at">breaks =</span> <span class="dv">50</span>,</span>
<span id="cb30-2"><a href="how-to-do-the-analysis-in-r.html#cb30-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Size of MPAs&quot;</span>,</span>
<span id="cb30-3"><a href="how-to-do-the-analysis-in-r.html#cb30-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab=</span><span class="st">&quot;Frequency&quot;</span>,</span>
<span id="cb30-4"><a href="how-to-do-the-analysis-in-r.html#cb30-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;The size-frequency distribution of MPAs&quot;</span>)   <span class="co"># Histogram without logarithmic axis</span></span></code></pre></div>
<p><img src="marine-cons_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>We can plot these results on a logarithm scale as:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="how-to-do-the-analysis-in-r.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">log</span>(data3<span class="sc">$</span>GIS_M_AREA), <span class="at">breaks =</span> <span class="dv">50</span>, <span class="at">xlab =</span> <span class="st">&quot;x label here&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;y label here&quot;</span>)   <span class="co"># Histogram with logarithmic axis</span></span></code></pre></div>
<p><img src="marine-cons_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>We can use a barplot to show the number of areas under each level of protection from the data contained in <code>data4</code>. Remember that <code>data4</code> has two columns:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="how-to-do-the-analysis-in-r.html#cb32-1" aria-hidden="true" tabindex="-1"></a>data4</span></code></pre></div>
<pre><code>## # A tibble: 7 x 2
##   IUCN_CAT     n
##   &lt;chr&gt;    &lt;int&gt;
## 1 Ia        1539
## 2 Ib         256
## 3 II         731
## 4 III        756
## 5 IV        4872
## 6 V         1638
## 7 VI         979</code></pre>
<p>The values of interest are in the column named <code>n</code>, which are the numbers associated with each level of protection. We refer to just this column using the command <code>data4$n</code>. Use the following code to make the bar plot:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="how-to-do-the-analysis-in-r.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(data4<span class="sc">$</span>n,</span>
<span id="cb34-2"><a href="how-to-do-the-analysis-in-r.html#cb34-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Level of protection&quot;</span>,</span>
<span id="cb34-3"><a href="how-to-do-the-analysis-in-r.html#cb34-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab=</span><span class="st">&quot;Number of areas&quot;</span>,</span>
<span id="cb34-4"><a href="how-to-do-the-analysis-in-r.html#cb34-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ia&quot;</span>,<span class="st">&quot;Ib&quot;</span>,<span class="st">&quot;II&quot;</span>,<span class="st">&quot;III&quot;</span>,<span class="st">&quot;IV&quot;</span>,<span class="st">&quot;V&quot;</span>,<span class="st">&quot;VI&quot;</span>),</span>
<span id="cb34-5"><a href="how-to-do-the-analysis-in-r.html#cb34-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">las=</span><span class="dv">1</span>,</span>
<span id="cb34-6"><a href="how-to-do-the-analysis-in-r.html#cb34-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">main=</span><span class="st">&quot;Number of areas for each level of protection&quot;</span>)</span></code></pre></div>
<p><img src="marine-cons_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>Letâ€™s revisits the data we saved in <code>data5</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="how-to-do-the-analysis-in-r.html#cb35-1" aria-hidden="true" tabindex="-1"></a>data5</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    IUCN_CAT       AREA_SUM
##    &lt;chr&gt;             &lt;dbl&gt;
##  1 Ia             2096610.
##  2 Ib              390707.
##  3 II             1038162.
##  4 III             121394.
##  5 IV             5188049.
##  6 Not Applicable 2761553.
##  7 Not Assigned   1506267.
##  8 Not Reported   9353197.
##  9 V              5830637.
## 10 VI             7708143.</code></pre>
<p>The column containing the data that we want to use for the barplot is <code>data5$AREA_SUM</code> which is that total area for each category. The bar plot showing the areas could be plotted by adding this code to your R script:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="how-to-do-the-analysis-in-r.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(data5<span class="sc">$</span>AREA_SUM,</span>
<span id="cb37-2"><a href="how-to-do-the-analysis-in-r.html#cb37-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Level of protection&quot;</span>,</span>
<span id="cb37-3"><a href="how-to-do-the-analysis-in-r.html#cb37-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab=</span><span class="st">&quot;Area(Amt. land and water/km^2)&quot;</span>,</span>
<span id="cb37-4"><a href="how-to-do-the-analysis-in-r.html#cb37-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ia&quot;</span>,<span class="st">&quot;Ib&quot;</span>,<span class="st">&quot;II&quot;</span>,<span class="st">&quot;III&quot;</span>,<span class="st">&quot;IV&quot;</span>, <span class="st">&quot;NA&quot;</span>, <span class="st">&quot;NA&quot;</span>,<span class="st">&quot;NR&quot;</span> ,<span class="st">&quot;V&quot;</span>, <span class="st">&quot;VI&quot;</span>),</span>
<span id="cb37-5"><a href="how-to-do-the-analysis-in-r.html#cb37-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">las=</span><span class="dv">3</span>,</span>
<span id="cb37-6"><a href="how-to-do-the-analysis-in-r.html#cb37-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">main=</span><span class="st">&quot;Area of land and water for each level of protection&quot;</span>)</span></code></pre></div>
<p><img src="marine-cons_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<!-- **ADVANCED ggplot2 (not required)** -->
<!-- `ggplot2` is a package that makes beautiful graphs. -->
<!-- Install the `ggplot2` package using the `install.packages()` and Load the _ggplot2_ package using the `library()`. We plot a histogram with logarithmic axis by running the code below: -->
<!-- ```{r} -->
<!-- library(ggplot2) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- ggplot(data.frame(log(data3$GIS_M_AREA)), aes(log(data3$GIS_M_AREA))) +  -->
<!--   geom_histogram(bins = 50) -->
<!-- ``` -->
<!-- We can also plot with the `scale_c_log10()` function: -->
<!-- ```{r} -->
<!-- ggplot(data.frame(data3$GIS_M_AREA), aes(data3$GIS_M_AREA)) + -->
<!-- geom_histogram(color = "blue", fill = "green", bins = 50) + -->
<!-- scale_x_log10() -->
<!-- ``` -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="getting-started-and-learning-r-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
